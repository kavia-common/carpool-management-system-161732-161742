{"is_source_file": true, "format": "Python", "description": "This file defines API endpoints related to calendar operations such as syncing calendar sources and listing upcoming events, using FastAPI. It includes request/response models, routing, and interactions with the calendar service.", "external_files": ["src/services/calendar_service", "src.core.security"], "external_methods": ["calendar_service.connect_source", "calendar_service.get_upcoming_events", "require_auth"], "published": ["router", "CalendarSyncRequest", "CalendarSyncResponse"], "classes": [{"name": "CalendarSyncRequest", "description": "Payload for connecting/syncing a calendar source for a user."}, {"name": "CalendarSyncResponse", "description": "Response after connecting a calendar source."}], "methods": [{"name": "CalendarSyncResponse sync_calendar(payload: CalendarSyncRequest, token: Optional[str] = None)", "description": "Endpoint for connecting a calendar source to a user's calendar after authenticating.", "scope": "", "scopeKind": ""}, {"name": "List[Dict] get_events( days: int = Query(7, ge=1, le=30, description=\"Number of days to look ahead\"), user_id: Optional[str] = Query(None, description=\"Optional user to include personalized ride events\"), )", "description": "Endpoint for retrieving upcoming calendar events, optionally including user-specific ride events.", "scope": "", "scopeKind": ""}], "calls": ["require_auth(token)", "calendar_service.connect_source(user_id=payload.user_id, source=payload.source)", "calendar_service.get_upcoming_events(days=days, user_id=user_id)"], "search-terms": ["FastAPI calendar router", "calendar source sync endpoint", "upcoming events API", "calendar service interaction", "API route /api/routers/calendar.py"], "state": 2, "file_id": 19, "knowledge_revision": 71, "git_revision": "6dea69da98dddace0a48b7a3bdd654c526418a60", "revision_history": [{"48": "6dea69da98dddace0a48b7a3bdd654c526418a60"}, {"71": "6dea69da98dddace0a48b7a3bdd654c526418a60"}], "ctags": [{"_type": "tag", "name": "CalendarSyncRequest", "path": "/home/kavia/workspace/code-generation/carpool-management-system-161732-161742/carpool_backend/src/api/routers/calendar.py", "pattern": "/^class CalendarSyncRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CalendarSyncResponse", "path": "/home/kavia/workspace/code-generation/carpool-management-system-161732-161742/carpool_backend/src/api/routers/calendar.py", "pattern": "/^class CalendarSyncResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "connected_sources", "path": "/home/kavia/workspace/code-generation/carpool-management-system-161732-161742/carpool_backend/src/api/routers/calendar.py", "pattern": "/^    connected_sources: int = Field(..., description=\"Total number of connected sources for the u/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "CalendarSyncResponse", "scopeKind": "class"}, {"_type": "tag", "name": "get_events", "path": "/home/kavia/workspace/code-generation/carpool-management-system-161732-161742/carpool_backend/src/api/routers/calendar.py", "pattern": "/^def get_events($/", "language": "Python", "typeref": "typename:List[Dict]", "kind": "function", "signature": "( days: int = Query(7, ge=1, le=30, description=\"Number of days to look ahead\"), user_id: Optional[str] = Query(None, description=\"Optional user to include personalized ride events\"), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/carpool-management-system-161732-161742/carpool_backend/src/api/routers/calendar.py", "pattern": "/^router = APIRouter(prefix=\"\\/calendar\", tags=[\"Calendar\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "source", "path": "/home/kavia/workspace/code-generation/carpool-management-system-161732-161742/carpool_backend/src/api/routers/calendar.py", "pattern": "/^    source: str = Field(..., description=\"Calendar source. Can be a URL or raw iCal\\/ICS text\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "CalendarSyncRequest", "scopeKind": "class"}, {"_type": "tag", "name": "sources", "path": "/home/kavia/workspace/code-generation/carpool-management-system-161732-161742/carpool_backend/src/api/routers/calendar.py", "pattern": "/^    sources: List[str] = Field(default_factory=list, description=\"Sample of recently added sourc/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "CalendarSyncResponse", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/carpool-management-system-161732-161742/carpool_backend/src/api/routers/calendar.py", "pattern": "/^    status: str = Field(..., description=\"Connection status\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "CalendarSyncResponse", "scopeKind": "class"}, {"_type": "tag", "name": "sync_calendar", "path": "/home/kavia/workspace/code-generation/carpool-management-system-161732-161742/carpool_backend/src/api/routers/calendar.py", "pattern": "/^def sync_calendar(payload: CalendarSyncRequest, token: Optional[str] = None) -> CalendarSyncResp/", "language": "Python", "typeref": "typename:CalendarSyncResponse", "kind": "function", "signature": "(payload: CalendarSyncRequest, token: Optional[str] = None)"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/carpool-management-system-161732-161742/carpool_backend/src/api/routers/calendar.py", "pattern": "/^    user_id: str = Field(..., description=\"User ID to associate the calendar with\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "CalendarSyncRequest", "scopeKind": "class"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/carpool-management-system-161732-161742/carpool_backend/src/api/routers/calendar.py", "pattern": "/^    user_id: str = Field(..., description=\"User ID\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "CalendarSyncResponse", "scopeKind": "class"}], "hash": "5ff674dde5a300b8e98cf881ba5902b4", "format-version": 4, "code-base-name": "carpool_backend", "filename": "carpool_backend/src/api/routers/calendar.py", "fields": [{"name": "int connected_sources", "scope": "CalendarSyncResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/calendar\", tags=[\"Calendar\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str source", "scope": "CalendarSyncRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "List[str] sources", "scope": "CalendarSyncResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str status", "scope": "CalendarSyncResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str user_id", "scope": "CalendarSyncRequest", "scopeKind": "class", "description": "unavailable"}]}